(()=>{var e={};e.id=220,e.ids=[220],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8620:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>l}),s(1668),s(1506),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),c=s(5231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);s.d(t,o);let l=["",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1668)),"/app/frontend-user/app/transactions/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/app/frontend-user/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/app/frontend-user/app/transactions/page.tsx"],x="/transactions/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/transactions/page",pathname:"/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3948:(e,t,s)=>{Promise.resolve().then(s.bind(s,659))},659:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(326),r=s(7577),n=s(6211),i=s(2643),c=s(772),o=s(6384),l=s(1048),d=s(2288),x=s(4474),p=s(4464),u=s(3855),h=s(7069);let m=(0,s(2881).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var j=s(5964),g=s(8091);let y="http://localhost:8001/api";function f(){let[e,t]=(0,r.useState)([]),[s,f]=(0,r.useState)([]),[v,N]=(0,r.useState)(!0),[b,_]=(0,r.useState)(!1),[w,q]=(0,r.useState)({account_id:"",type:"income",category:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0]}),S=async()=>{let e=localStorage.getItem("token");if(e)try{let[s,a]=await Promise.all([p.Z.get(`${y}/transactions?limit=50`,{headers:{Authorization:`Bearer ${e}`}}),p.Z.get(`${y}/accounts`,{headers:{Authorization:`Bearer ${e}`}})]);t(s.data||[]),f(a.data||[])}catch(e){console.error("Failed to fetch data",e)}finally{N(!1)}},Z=async e=>{e.preventDefault();let t=localStorage.getItem("token");if(t)try{await p.Z.post(`${y}/transactions`,{account_id:w.account_id,type:w.type,category:w.category,amount:parseFloat(w.amount),description:w.description,transaction_date:w.transaction_date},{headers:{Authorization:`Bearer ${t}`}}),_(!1),q({account_id:"",type:"income",category:"",amount:"",description:"",transaction_date:new Date().toISOString().split("T")[0]}),S()}catch(e){alert(e.response?.data?.error||"Failed to create transaction")}},k=async e=>{if(!confirm("Are you sure you want to delete this transaction?"))return;let t=localStorage.getItem("token");if(t)try{await p.Z.delete(`${y}/transactions/${e}`,{headers:{Authorization:`Bearer ${t}`}}),S()}catch(e){alert(e.response?.data?.error||"Failed to delete transaction")}},A=e=>{let t=s.find(t=>t.id===e);return t?.name||"Unknown Account"},P=()=>e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),I=()=>e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return v?a.jsx(n.Z,{children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("p",{children:"Loading..."})})}):a.jsx(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-6","data-testid":"transactions-page",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Track your income and expenses"})]}),(0,a.jsxs)(c.z,{onClick:()=>_(!0),"data-testid":"add-transaction-button",children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{className:"pb-2",children:a.jsx(i.ll,{className:"text-sm font-medium text-gray-600",children:"Total Income"})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["Rp ",P().toLocaleString("id-ID")]}),a.jsx(h.Z,{className:"h-8 w-8 text-green-200"})]})})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{className:"pb-2",children:a.jsx(i.ll,{className:"text-sm font-medium text-gray-600",children:"Total Expenses"})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["Rp ",I().toLocaleString("id-ID")]}),a.jsx(m,{className:"h-8 w-8 text-red-200"})]})})]}),(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{className:"pb-2",children:a.jsx(i.ll,{className:"text-sm font-medium text-gray-600",children:"Net Balance"})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:["Rp ",(P()-I()).toLocaleString("id-ID")]}),a.jsx(j.Z,{className:"h-8 w-8 text-blue-200"})]})})]})]}),(0,a.jsxs)(i.Zb,{"data-testid":"transactions-list",children:[(0,a.jsxs)(i.Ol,{children:[a.jsx(i.ll,{children:"Recent Transactions"}),a.jsx(i.SZ,{children:"Your latest financial activities"})]}),a.jsx(i.aY,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-12","data-testid":"no-transactions-message",children:[a.jsx(j.Z,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"No transactions yet. Add your first transaction to start tracking."}),(0,a.jsxs)(c.z,{onClick:()=>_(!0),children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}):a.jsx("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":`transaction-item-${e.id}`,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`p-3 rounded-full ${"income"===e.type?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:"income"===e.type?a.jsx(h.Z,{className:"h-5 w-5"}):a.jsx(m,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:e.category}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[A(e.account_id)," â€¢"," ",new Date(e.transaction_date).toLocaleDateString("id-ID")]}),e.description&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("p",{className:`font-bold text-lg ${"income"===e.type?"text-green-600":"text-red-600"}`,children:["income"===e.type?"+":"-","Rp"," ",e.amount.toLocaleString("id-ID")]}),a.jsx(c.z,{variant:"ghost",size:"icon",onClick:()=>k(e.id),"data-testid":`delete-transaction-${e.id}`,children:a.jsx(g.Z,{className:"h-4 w-4 text-red-500"})})]})]},e.id))})})]}),a.jsx(d.Vq,{open:b,onOpenChange:_,children:(0,a.jsxs)(d.cZ,{"data-testid":"add-transaction-dialog",children:[(0,a.jsxs)(d.fK,{children:[a.jsx(d.$N,{children:"Add New Transaction"}),a.jsx(d.Be,{children:"Record a new income or expense transaction"})]}),(0,a.jsxs)("form",{onSubmit:Z,children:[(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"account",children:"Account"}),(0,a.jsxs)(x.Ph,{value:w.account_id,onValueChange:e=>q({...w,account_id:e}),required:!0,children:[a.jsx(x.i4,{"data-testid":"transaction-account-select",children:a.jsx(x.ki,{placeholder:"Select account"})}),a.jsx(x.Bw,{children:s.map(e=>a.jsx(x.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"type",children:"Type"}),(0,a.jsxs)(x.Ph,{value:w.type,onValueChange:e=>q({...w,type:e}),children:[a.jsx(x.i4,{"data-testid":"transaction-type-select",children:a.jsx(x.ki,{})}),(0,a.jsxs)(x.Bw,{children:[a.jsx(x.Ql,{value:"income",children:"Income"}),a.jsx(x.Ql,{value:"expense",children:"Expense"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"category",children:"Category"}),a.jsx(o.I,{id:"category",placeholder:"e.g., Salary, Food, Transport",value:w.category,onChange:e=>q({...w,category:e.target.value}),required:!0,"data-testid":"transaction-category-input"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"amount",children:"Amount"}),a.jsx(o.I,{id:"amount",type:"number",step:"0.01",placeholder:"0",value:w.amount,onChange:e=>q({...w,amount:e.target.value}),required:!0,"data-testid":"transaction-amount-input"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"date",children:"Date"}),a.jsx(o.I,{id:"date",type:"date",value:w.transaction_date,onChange:e=>q({...w,transaction_date:e.target.value}),"data-testid":"transaction-date-input"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"description",children:"Description (Optional)"}),a.jsx(o.I,{id:"description",placeholder:"Add notes...",value:w.description,onChange:e=>q({...w,description:e.target.value}),"data-testid":"transaction-description-input"})]})]}),(0,a.jsxs)(d.cN,{children:[a.jsx(c.z,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Cancel"}),a.jsx(c.z,{type:"submit","data-testid":"submit-transaction-button",children:"Add Transaction"})]})]})]})})]})})}},1668:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/app/frontend-user/app/transactions/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[819,8,730,954,755],()=>s(8620));module.exports=a})();