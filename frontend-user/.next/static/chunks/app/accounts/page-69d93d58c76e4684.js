(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{8456:function(e,a,t){Promise.resolve().then(t.bind(t,8265))},8265:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var c=t(7437),s=t(2265),n=t(5185),l=t(6070),r=t(2869),i=t(5186),d=t(6815),o=t(6110),u=t(3647),h=t(3464),x=t(1804),j=t(2568),m=t(525),p=t(8226),y=t(9397),v=t(8930);let b="http://localhost:8001/api";function g(){let[e,a]=(0,s.useState)([]),[t,g]=(0,s.useState)(!0),[N,f]=(0,s.useState)(!1),[w,k]=(0,s.useState)({name:"",type:"bank",balance:"",currency:"IDR"});(0,s.useEffect)(()=>{C()},[]);let C=async()=>{let e=localStorage.getItem("token");if(e)try{let t=await h.Z.get("".concat(b,"/accounts"),{headers:{Authorization:"Bearer ".concat(e)}});a(t.data||[])}catch(e){console.error("Failed to fetch accounts",e)}finally{g(!1)}},Z=async e=>{e.preventDefault();let a=localStorage.getItem("token");if(a)try{await h.Z.post("".concat(b,"/accounts"),{name:w.name,type:w.type,balance:parseFloat(w.balance)||0,currency:w.currency},{headers:{Authorization:"Bearer ".concat(a)}}),f(!1),k({name:"",type:"bank",balance:"",currency:"IDR"}),C()}catch(e){var t,c;alert((null===(c=e.response)||void 0===c?void 0:null===(t=c.data)||void 0===t?void 0:t.error)||"Failed to create account")}},A=async e=>{if(!confirm("Are you sure you want to delete this account?"))return;let a=localStorage.getItem("token");if(a)try{await h.Z.delete("".concat(b,"/accounts/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}),C()}catch(e){var t,c;alert((null===(c=e.response)||void 0===c?void 0:null===(t=c.data)||void 0===t?void 0:t.error)||"Failed to delete account")}},S=e=>{switch(e){case"bank":default:return(0,c.jsx)(x.Z,{className:"h-6 w-6"});case"wallet":return(0,c.jsx)(j.Z,{className:"h-6 w-6"});case"investment":return(0,c.jsx)(m.Z,{className:"h-6 w-6"});case"credit_card":return(0,c.jsx)(p.Z,{className:"h-6 w-6"})}};return t?(0,c.jsx)(n.Z,{children:(0,c.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,c.jsx)("p",{children:"Loading..."})})}):(0,c.jsx)(n.Z,{children:(0,c.jsxs)("div",{className:"space-y-6","data-testid":"accounts-page",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Accounts"}),(0,c.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your financial accounts"})]}),(0,c.jsxs)(r.z,{onClick:()=>f(!0),"data-testid":"add-account-button",children:[(0,c.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}),(0,c.jsxs)(l.Zb,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[(0,c.jsxs)(l.Ol,{children:[(0,c.jsx)(l.ll,{className:"text-white",children:"Total Balance"}),(0,c.jsxs)(l.SZ,{className:"text-blue-100",children:["Across all ",e.length," accounts"]})]}),(0,c.jsx)(l.aY,{children:(0,c.jsxs)("p",{className:"text-4xl font-bold",children:["Rp ",e.reduce((e,a)=>e+a.balance,0).toLocaleString("id-ID")]})})]}),(0,c.jsxs)(l.Zb,{"data-testid":"accounts-list",children:[(0,c.jsxs)(l.Ol,{children:[(0,c.jsx)(l.ll,{children:"Your Accounts"}),(0,c.jsx)(l.SZ,{children:"All your financial accounts in one place"})]}),(0,c.jsx)(l.aY,{children:0===e.length?(0,c.jsxs)("div",{className:"text-center py-12","data-testid":"no-accounts-message",children:[(0,c.jsx)(x.Z,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),(0,c.jsx)("p",{className:"text-gray-500 mb-4",children:"No accounts yet. Create your first account to get started."}),(0,c.jsxs)(r.z,{onClick:()=>f(!0),children:[(0,c.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Create Account"]})]}):(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":"account-item-".concat(e.id),children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:S(e.type)}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,c.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.type.replace("_"," ")})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"text-right",children:(0,c.jsxs)("p",{className:"font-bold text-xl",children:[e.currency," ",e.balance.toLocaleString("id-ID")]})}),(0,c.jsx)(r.z,{variant:"ghost",size:"icon",onClick:()=>A(e.id),"data-testid":"delete-account-".concat(e.id),children:(0,c.jsx)(v.Z,{className:"h-4 w-4 text-red-500"})})]})]},e.id))})})]}),(0,c.jsx)(o.Vq,{open:N,onOpenChange:f,children:(0,c.jsxs)(o.cZ,{"data-testid":"add-account-dialog",children:[(0,c.jsxs)(o.fK,{children:[(0,c.jsx)(o.$N,{children:"Add New Account"}),(0,c.jsx)(o.Be,{children:"Create a new financial account to track your balance"})]}),(0,c.jsxs)("form",{onSubmit:Z,children:[(0,c.jsxs)("div",{className:"space-y-4 py-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(d._,{htmlFor:"name",children:"Account Name"}),(0,c.jsx)(i.I,{id:"name",placeholder:"e.g., Main Bank Account",value:w.name,onChange:e=>k({...w,name:e.target.value}),required:!0,"data-testid":"account-name-input"})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(d._,{htmlFor:"type",children:"Account Type"}),(0,c.jsxs)(u.Ph,{value:w.type,onValueChange:e=>k({...w,type:e}),children:[(0,c.jsx)(u.i4,{"data-testid":"account-type-select",children:(0,c.jsx)(u.ki,{})}),(0,c.jsxs)(u.Bw,{children:[(0,c.jsx)(u.Ql,{value:"bank",children:"Bank"}),(0,c.jsx)(u.Ql,{value:"wallet",children:"Wallet"}),(0,c.jsx)(u.Ql,{value:"investment",children:"Investment"}),(0,c.jsx)(u.Ql,{value:"credit_card",children:"Credit Card"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(d._,{htmlFor:"balance",children:"Initial Balance"}),(0,c.jsx)(i.I,{id:"balance",type:"number",step:"0.01",placeholder:"0",value:w.balance,onChange:e=>k({...w,balance:e.target.value}),"data-testid":"account-balance-input"})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(d._,{htmlFor:"currency",children:"Currency"}),(0,c.jsxs)(u.Ph,{value:w.currency,onValueChange:e=>k({...w,currency:e}),children:[(0,c.jsx)(u.i4,{"data-testid":"account-currency-select",children:(0,c.jsx)(u.ki,{})}),(0,c.jsxs)(u.Bw,{children:[(0,c.jsx)(u.Ql,{value:"IDR",children:"IDR (Rupiah)"}),(0,c.jsx)(u.Ql,{value:"USD",children:"USD (Dollar)"}),(0,c.jsx)(u.Ql,{value:"EUR",children:"EUR (Euro)"})]})]})]})]}),(0,c.jsxs)(o.cN,{children:[(0,c.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,c.jsx)(r.z,{type:"submit","data-testid":"submit-account-button",children:"Create Account"})]})]})]})})]})})}}},function(e){e.O(0,[809,444,441,358,971,117,744],function(){return e(e.s=8456)}),_N_E=e.O()}]);